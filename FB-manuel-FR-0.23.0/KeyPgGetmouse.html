<html>
<head>
<title>GetMouse</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="fb_body_wrapper">
<div id="fb_tab">
<div id="fb_tab_l">GetMouse</div>
<div id="fb_tab_r">&nbsp;<img src="images/fblogo_mini.gif" /></div> 
</div> 
<div id="fb_pg_wrapper">
<div id="fb_pg_body">
	R&eacute;cup&egrave;re l'&eacute;tat du dispositif de pointage de la souris<br \>
<br \>
<div class="fb_sect_title">Syntaxe</div><div class="fb_sect_cont"><tt><br \>
<a href="KeyPgDeclare.html">Declare</a> <a href="KeyPgFunction.html">Function</a> <b>GetMouse</b> ( <a href="KeyPgByref.html">ByRef</a> <i>x</i> <a href="KeyPgAs.html">As</a> <a href="KeyPgInteger.html">Integer</a>, <a href="KeyPgByref.html">ByRef</a> <i>y</i> <a href="KeyPgAs.html">As</a> <a href="KeyPgInteger.html">Integer</a>, <a href="KeyPgByref.html">ByRef</a> <i>wheel</i> <a href="KeyPgAs.html">As</a> <a href="KeyPgInteger.html">Integer</a> = 0, <a href="KeyPgByref.html">ByRef</a> <i>buttons</i> <a href="KeyPgAs.html">As</a> <a href="KeyPgInteger.html">Integer</a> = 0, <a href="KeyPgByref.html">ByRef</a> <i>clip</i> <a href="KeyPgAs.html">As</a> <a href="KeyPgInteger.html">Integer</a> = 0 ) <a href="KeyPgAs.html">As</a> <a href="KeyPgInteger.html">Integer</a><br \>
</tt><br \>
</div><div class="fb_sect_title">Usage</div><div class="fb_sect_cont"><tt><br \>
<i>result</i> = <b>GetMouse</b> (<i>x</i>, <i>y</i> [, [ <i>wheel</i> ] [, [ <i>buttons</i> ] [, [ <i>clip</i> ]]]])<br \>
</tt><br \>
</div><div class="fb_sect_title">Param&egrave;tres</div><div class="fb_sect_cont"><br \>
<tt><i>x</i></tt><br \>
<div class="fb_indent">valeur de la coordonn&eacute;e x<br \>
</div><tt><i>y</i></tt><br \>
<div class="fb_indent">valeur de la coordonn&eacute;e y<br \>
</div><tt><i>wheel</i></tt><br \>
<div class="fb_indent">valeur de la molette<br \>
</div><tt><i>buttons</i></tt><br \>
<div class="fb_indent">&eacute;tat des boutons<br \>
</div><tt><i>clip</i></tt><br \>
<div class="fb_indent">&eacute;tat "clip"<br \>
<br \>
</div></div><div class="fb_sect_title">Valeur retourn&eacute;e</div><div class="fb_sect_cont"><br \>
<tt>0</tt> si succ&egrave;s ou <tt>1</tt> si &eacute;chec.<br \>
<br \>
</div><div class="fb_sect_title">Description</div><div class="fb_sect_cont"><br \>
<tt><b>GetMouse</b></tt> d&eacute;termine la position de la souris et l'&eacute;tat des boutons; l'information est retourn&eacute;e dans les variables pass&eacute;es par r&eacute;f&eacute;rence &agrave; la fonction. Si aucune souris n'est disponible, toutes les variables contiendront la valeur <tt>-1</tt>. <br \>
<br \>
En mode console, les coordonn&eacute;es <tt><i>x</i></tt> et <tt><i>y</i></tt> sont les coordonn&eacute;es de la cellule caract&egrave;re o&ugrave; se trouve la souris; le coin en haut &agrave; gauche de l'&eacute;cran  a les coordonn&eacute;es <tt>0,0</tt>.. Si la souris sort de la fen&ecirc;tre console, <tt><b>GetMouse</b></tt> renvoie les derni&egrave;res coordonn&eacute;es lorsque la souris &eacute;tait encore sur la fen&ecirc;tre. <br \>
<br \>
En mode graphique, <tt><i>x</i></tt> et <tt><i>y</i></tt> retournent toujours les coordonn&eacute;es en pixels relatives au coin en haut &agrave; gauche de l'&eacute;cran, qui lui a les coordonn&eacute;es 0,0; un syst&egrave;me de coordonn&eacute;es personnel &eacute;tabli via <tt><a href="KeyPgViewgraphics.html">View</a></tt> ou <tt><a href="KeyPgWindow.html">Window</a></tt> n'affectera pas les coordonn&eacute;es retourn&eacute;es par <tt><b>GetMouse</b></tt>. Si la souris sort de la fen&ecirc;tre, toutes les valeurs seront mises &agrave; <tt>-1</tt>.<br \>
<br \>
<tt><i>Wheel</i></tt> est le compteur de la molette souris; actionner la molette vers l'avant augmentera la valeur du compteur, une rotation vers l'arri&egrave;re diminuera la valeur du compteur. Au d&eacute;part du programme ou quand un nouveau mode graphique est valid&eacute; via <tt><a href="KeyPgScreengraphics.html">Screen</a></tt>, la position de la molette est remise &agrave; 0. FreeBASIC ne g&egrave;re pas toujours la molette pour certaines plates-formes, dans ce cas une valeur 0 est toujours renvoy&eacute;e.<br \>
<br \>
<tt><i>Buttons</i></tt> stocke l'&eacute;tat des boutons sous la forme d'un masque de bits: le bit 0 est valide (&agrave; 1) si le bouton gauche est appuy&eacute;; le bit 1 est valide si le bouton droit est appuy&eacute;; le bit 2 est valide si le bouton central / molette est appuy&eacute;.<br \>
<br \>
<tt><i>Clip</i></tt> stocke l'&eacute;tat de "clipping"; si &agrave; <tt>1</tt>, la souris est "clipp&eacute;e" &agrave; la fen&ecirc;tre graphique; si &agrave; <tt>0</tt>, la souris n'est pas "clipp&eacute;e".<br \>
<br \>
</div><div class="fb_sect_title">Exemple</div><div class="fb_sect_cont"><br \>
<tt><div class="freebasic">
<span class="key">Dim</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="wrd">x</span><span class="oth">,</span>&nbsp;<span class="wrd">y</span><span class="oth">,</span>&nbsp;<span class="wrd">buttons</span><span class="oth">,</span>&nbsp;<span class="wrd">res</span>&nbsp;<br />
<span class="com">'&nbsp;Set&nbsp;video&nbsp;mode&nbsp;and&nbsp;enter&nbsp;loop</span><br />
<span class="key">ScreenRes</span>&nbsp;<span class="num">640</span><span class="oth">,</span>&nbsp;<span class="num">480</span><span class="oth">,</span>&nbsp;<span class="num">8</span><br />
<span class="key">Do</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">'&nbsp;Recupere&nbsp;x,&nbsp;y&nbsp;souris&nbsp;et&nbsp;boutons.&nbsp;Discard&nbsp;wheel&nbsp;position.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="wrd">res</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="key">GetMouse</span>&nbsp;<span class="oth">(</span><span class="wrd">x</span><span class="oth">,</span>&nbsp;<span class="wrd">y</span><span class="oth">,</span>&nbsp;<span class="oth">,</span>&nbsp;<span class="wrd">buttons</span><span class="oth">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Locate</span>&nbsp;<span class="num">1</span><span class="oth">,</span>&nbsp;<span class="num">1</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">If</span>&nbsp;<span class="wrd">res</span>&nbsp;<span class="oth">&lt;&gt;</span>&nbsp;<span class="num">0</span>&nbsp;<span class="key">Then</span>&nbsp;<span class="com">''&nbsp;Failure</span><br />
<br />
<span class="def">#ifdef&nbsp;__FB_DOS__<br />
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="quo">"Mouse&nbsp;or&nbsp;mouse&nbsp;driver&nbsp;not&nbsp;available"</span><br />
<span class="def">#else<br />
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="quo">"Mouse&nbsp;not&nbsp;available&nbsp;or&nbsp;not&nbsp;on&nbsp;window"</span><br />
<span class="def">#endif<br />
</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Else</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="key">Using</span>&nbsp;<span class="quo">"Mouse&nbsp;position:&nbsp;###:###&nbsp;&nbsp;Buttons:&nbsp;"</span><span class="oth">;</span>&nbsp;<span class="wrd">x</span><span class="oth">;</span>&nbsp;<span class="wrd">y</span><span class="oth">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">If</span>&nbsp;<span class="wrd">buttons</span>&nbsp;<span class="key">And</span>&nbsp;<span class="num">1</span>&nbsp;<span class="key">Then</span>&nbsp;<span class="key">Print</span>&nbsp;<span class="quo">"L"</span><span class="oth">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">If</span>&nbsp;<span class="wrd">buttons</span>&nbsp;<span class="key">And</span>&nbsp;<span class="num">2</span>&nbsp;<span class="key">Then</span>&nbsp;<span class="key">Print</span>&nbsp;<span class="quo">"R"</span><span class="oth">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">If</span>&nbsp;<span class="wrd">buttons</span>&nbsp;<span class="key">And</span>&nbsp;<span class="num">4</span>&nbsp;<span class="key">Then</span>&nbsp;<span class="key">Print</span>&nbsp;<span class="quo">"M"</span><span class="oth">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="quo">"&nbsp;&nbsp;&nbsp;"</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">End</span>&nbsp;<span class="key">If</span><br />
<span class="key">Loop</span>&nbsp;<span class="key">While</span>&nbsp;<span class="key">Inkey</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="quo">""</span><br />
<span class="key">End</span><br />
</div></tt><br />
<tt><div class="freebasic">
<span class="com">'Example&nbsp;2:&nbsp;type-union-type&nbsp;structure</span><br />
<span class="key">Type</span>&nbsp;<span class="wrd">mouse</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="wrd">res</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="wrd">x</span><span class="oth">,</span>&nbsp;<span class="wrd">y</span><span class="oth">,</span>&nbsp;<span class="wrd">wheel</span><span class="oth">,</span>&nbsp;<span class="wrd">clip</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Union</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="wrd">buttons</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Type</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Left</span><span class="oth">:</span><span class="num">1</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Right</span><span class="oth">:</span><span class="num">1</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="wrd">middle</span><span class="oth">:</span><span class="num">1</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">End</span>&nbsp;<span class="key">Type</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">End</span>&nbsp;<span class="key">Union</span><br />
<span class="key">End</span>&nbsp;<span class="key">Type</span><br />
&nbsp;<br />
<span class="key">Screen</span>&nbsp;<span class="num">11</span><br />
<span class="key">Dim</span>&nbsp;<span class="key">As</span>&nbsp;<span class="wrd">mouse</span>&nbsp;<span class="wrd">m</span><br />
<br />
<span class="key">Do</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="wrd">m.res</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="key">GetMouse</span><span class="oth">(</span>&nbsp;<span class="wrd">m.x</span><span class="oth">,</span>&nbsp;<span class="wrd">m.y</span><span class="oth">,</span>&nbsp;<span class="wrd">m.wheel</span><span class="oth">,</span>&nbsp;<span class="wrd">m.buttons</span><span class="oth">,</span>&nbsp;<span class="wrd">m.clip</span>&nbsp;<span class="oth">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Cls</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="key">Using</span>&nbsp;<span class="quo">"res&nbsp;=&nbsp;#"</span><span class="oth">;</span>&nbsp;<span class="wrd">m.res</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="key">Using</span>&nbsp;<span class="quo">"x&nbsp;=&nbsp;###;&nbsp;y&nbsp;=&nbsp;###;&nbsp;wheel&nbsp;=&nbsp;+###;&nbsp;clip&nbsp;=&nbsp;##"</span><span class="oth">;</span>&nbsp;<span class="wrd">m.x</span><span class="oth">;</span>&nbsp;<span class="wrd">m.y</span><span class="oth">;</span>&nbsp;<span class="wrd">m.wheel</span><span class="oth">;</span>&nbsp;<span class="wrd">m.clip</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="key">Using</span>&nbsp;<span class="quo">"buttons&nbsp;=&nbsp;##;&nbsp;left&nbsp;=&nbsp;#;&nbsp;middle&nbsp;=&nbsp;#;&nbsp;right&nbsp;=&nbsp;#"</span><span class="oth">;</span>&nbsp;<span class="wrd">m.buttons</span><span class="oth">;</span>&nbsp;<span class="wrd">m.left</span><span class="oth">;</span>&nbsp;<span class="wrd">m.middle</span><span class="oth">;</span>&nbsp;<span class="wrd">m.right</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Sleep</span>&nbsp;<span class="num">10</span><span class="oth">,</span>&nbsp;<span class="num">1</span><br />
<span class="key">Loop</span>&nbsp;<span class="key">While</span>&nbsp;<span class="key">Inkey</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="quo">""</span><br />
</div></tt><br />

<br \>
</div><div class="fb_sect_title">Diff&eacute;rences de dialecte</div><div class="fb_sect_cont"><br \>
<ul><li> Non disponible dans le dialecte <i><a href="CompilerOptlang.html">-lang qb</a></i> sauf si r&eacute;f&eacute;renc&eacute; avec l'alias <tt><b>__Getmouse</b></tt>.  Les variables pass&eacute;es doivent aussi &ecirc;tre du type <tt><a href="KeyPgLong.html">Long</a></tt> au lieu de <tt><a href="KeyPgInteger.html">Integer (Entier)</a></tt>.<br \>
<br \>
</ul></div><div class="fb_sect_title">Diff&eacute;rences avec QB</div><div class="fb_sect_cont"><br \>
<ul><li> Nouveau pour FreeBASIC<br \>
<br \>
</ul></div><div class="fb_sect_title">Voir aussi</div><div class="fb_sect_cont"><br \>
<ul><li> <tt><a href="KeyPgScreenres.html">ScreenRes</a></tt> valide le mode graphique par r&eacute;solution<br \>
<li> <tt><a href="KeyPgScreengraphics.html">Screen (Graphiques)</a></tt> valide le mode graphique m&eacute;thode QB<br \>
<li> <tt><a href="KeyPgSetmouse.html">SetMouse</a></tt><br \>
<li> <tt><a href="KeyPgMultikey.html">MultiKey</a></tt><br \>
<li> <tt><a href="KeyPgGetjoystick.html">GetJoystick</a></tt><br \>
<br \>
</ul></div>
</div>
</div> 
</div> 
</body>
</html>
